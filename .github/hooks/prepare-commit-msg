if [ "$2" = "" ]; then
    # Get the diff of staged changes
    STAGED_DIFF=$(git diff --cached --name-status)
    
    if [ -n "$STAGED_DIFF" ]; then
        echo "ðŸ¤– Generating commit message..."
        
        # Use Gemini CLI to analyze changes and suggest commit message
        SUGGESTED_MESSAGE=$(gemini "Analyze these git changes and suggest a concise, conventional commit message:

$STAGED_DIFF

$(git diff --cached)

Generate a single line commit message following conventional commit format (type(scope): description). Be specific about what changed. Examples:
- feat(auth): add JWT token validation
- fix(ui): resolve button alignment on mobile
- docs(readme): update installation instructions
- refactor(api): extract user validation logic")

        # Prepend the suggestion to the commit message file
        echo "# ðŸ¤– AI Suggestion: $SUGGESTED_MESSAGE" > "$1.tmp"
        echo "#" >> "$1.tmp"
        cat "$1" >> "$1.tmp"
        mv "$1.tmp" "$1"
    fi
fi