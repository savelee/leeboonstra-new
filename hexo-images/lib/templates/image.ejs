<figure>
    <picture>
        <%_ for (const type of Object.keys(files).filter((f) => f !== 'default')) { _%>
            <%_ const typeSizes = Object.keys(files[type]) _%>
            <%_ for (const typeSize of Object.keys(files[type])) { _%>
                <%_ const url = files[type][typeSize] _%>
                <%_ const mimeType = `image/${type}` _%>
                <%_ const { media } = dimensions[typeSize] _%>
                <source srcset="<%= url %>"<%- media ? `media="${media}" ` : '' %> type="<%= mimeType %>" />
            <%_ } _%>
        <%_ } _%>
        <%_ if (files.default) { _%>
            <img src="<%= files.default %>" alt="<%= alt %>" />
        <%_ } _%>
    </picture>
    <%_ if (caption) { _%>
        <figcaption><%= caption %></figcaption>
    <%_ } _%>
</figure>
